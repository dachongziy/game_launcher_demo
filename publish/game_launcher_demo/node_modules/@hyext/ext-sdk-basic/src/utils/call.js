/**
* 仅执行一次
* @param fun 只执行一次的方法
* @returns
*/
export function once(fun) {
  let result;
  let callCount = 0;

  return function (...args) {
    if (callCount !== 0) {
      return result;
    }
    callCount += 1;
    return (result = fun.apply(null, args));
  };
}
/**
* 仅成功成功一次
* @param fun 只执行成功一次的方法
* @returns
*/
export function oncePromiseResolve(fun) {
  let tempPromise;
  let calling = false;

  return function (...args) {
    if (calling) return tempPromise;
    calling = true;
    return (tempPromise = (async () => {
      try {
        return await fun(...args);
      } catch (err) {
        calling = false;
        throw err;
      }
    })())
  };
}