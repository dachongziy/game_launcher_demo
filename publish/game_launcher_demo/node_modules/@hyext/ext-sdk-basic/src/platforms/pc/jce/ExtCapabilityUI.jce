#include "/home/tafjce/HUYA/comm/GameLiveBase.jce"
#include "/home/tafjce/ExtComm/comm/ExtComm.jce"
module HUYA
{
    //存储请求
    struct SetStorageReq
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		//开发者appid
        2 optional string extUuid;                        		//扩展uuid
        3 optional long pid;                        			//主播uid
        4 optional string dataKey;                        		    //存储key
		5 optional string dataValue;                        		//存储value
		6 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
    };

    //存储请求响应
    struct SetStorageResp
    {
        0 optional ExtComm::ExtCommonResponse response;
    };

    //获取存储key请求
    struct GetStorageKeyReq
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		//开发者appid
        2 optional string extUuid;                        		//扩展uuid
        3 optional long pid;                        			//主播uid
        4 optional string dataKey;                        		    //存储key
        5 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
    };

    //获取存储key请求响应
    struct GetStorageKeyResp
    {
        0 optional ExtComm::ExtCommonResponse response;
        1 optional string dataValue;
    };
    
    //删除存储key请求
    struct DelStorageKeyReq
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		//开发者appid
        2 optional string extUuid;                        		//扩展uuid
        3 optional long pid;                        			//主播uid
        4 optional string dataKey;                        		    //存储key
        5 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
    };

    //删除存储key请求响应
    struct DelStorageKeyResp
    {
        0 optional ExtComm::ExtCommonResponse response;
    };
    
    //获取小程序主播存储所有key名请求
    struct GetStorageAllKeysReq
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		//开发者appid
        2 optional string extUuid;                        		//扩展uuid
        3 optional long pid;                        			//主播uid
        4 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
    };

    //获取小程序主播存储所有key名请求响应
    struct GetStorageAllKeysResp
    {
        0 optional ExtComm::ExtCommonResponse response;
        1 optional vector<string> dataKeys;
    };
    
    //直播间广播请求
    struct DeliverRoomMsgByUnionIdReq
    {
        0 optional HUYA::UserId tId;
        1 optional string authorization;                        			//端上token
        2 optional string appId;                        		//开发者appid
        3 optional string extUuid;                        		//扩展uuid
        4 optional long pid;                        			//主播uid
        5 optional int roomId;                         			//主播房间号
        6 optional string event;                        			//自定义事件
        7 optional string message;                        			//自定义消息内容
        8 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
    };

    //直播间广播请求响应
    struct DeliverRoomMsgByUnionIdResp
    {
        0 optional ExtComm::ExtCommonResponse response;
    };

    //获取OSS文件上传签名请求体
        struct GetPicUploadPolicyReq
        {
            0 optional HUYA::UserId tId;                            //必填cookie或token，需验登录态
            1 optional string appId;                        		//开发者appid
            2 optional string extUuid;                        		//扩展uuid
            3 optional long pid;                        			//主播uid
            4 optional int roomId;                        		    //直播间房间号
            5 optional ExtComm::ExtCommonRequest request;                        //小程序公共请求头
        };

        //获取OSS文件上传签名响应体
        struct GetPicUploadPolicyResp
        {
            0 optional ExtComm::ExtCommonResponse response;
            1 optional string accessId; //oss AccessKeyId
            2 optional string uploadHost;  //oss上传地址
            3 optional string policy;
            4 optional string signature; //签名
            5 optional long expireTime;  //签名过期时间，毫秒
            6 optional string callback;  //回调设置
            7 optional string uploadDir;  //文件上传目录
        };
        
        //展示（更新）入口状态请求
		struct ShowEntranceReq
		{
		    0 optional HUYA::UserId tId;
		    1 optional ExtComm::ExtCommonRequest request;                    //小程序公共请求头
		    2 optional string appId;                                //开发者appid
		    3 optional string extUuid;                              //扩展uuid
		    4 optional long pid;                                    //主播uid
		    5 optional vector<string> extComponentTypeTag;          //小程序类型tag
		    6 optional int countDown;                               //倒计时（秒）
		    7 optional string cornerMarkId;                         //默认脚本Id（枚举）
		};
		
		//展示（更新）入口状态响应
		struct ShowEntranceResp
		{
		    0 optional ExtComm::ExtCommonResponse response;
		};   
		
		//关闭入口请求
		struct CloseEntranceReq
		{
		    0 optional HUYA::UserId tId;
		    1 optional ExtComm::ExtCommonRequest request;                    //小程序公共请求头
		    2 optional string appId;                                //开发者appid
		    3 optional string extUuid;                              //扩展uuid
		    4 optional long pid;                                    //主播uid
		    5 optional vector<string> extComponentTypeTag;          //小程序类型tag
		};
		
		//关闭入口请求响应
		struct CloseEntranceResp
		{
		    0 optional ExtComm::ExtCommonResponse response;
		}; 
        
    
    interface ExtCapabilityUI
    {
        int setStorage(SetStorageReq tReq, out SetStorageResp tRsp);                        //存储kv
        int getStorageKey(GetStorageKeyReq tReq, out GetStorageKeyResp tRsp);               //根据k查询v
        int delStorageKey(DelStorageKeyReq tReq, out DelStorageKeyResp tRsp);               //根据k删除存储内容
        int getStorageAllKeys(GetStorageAllKeysReq tReq, out GetStorageAllKeysResp tRsp);   //查询所有key名
        
        int deliverRoomMsgByUnionId(DeliverRoomMsgByUnionIdReq tReq, out DeliverRoomMsgByUnionIdResp tRsp);   //直播间广播接口

        int getPicUploadPolicy(GetPicUploadPolicyReq tReq, out GetPicUploadPolicyResp tRsp); //获取OSS文件上传签名
        
        int showEntrance(ShowEntranceReq tReq, out ShowEntranceResp tRsp);                   //展示入口
        int closeEntrance(CloseEntranceReq tReq, out CloseEntranceResp tRsp);                //关闭入口
        
    };
};