#include "/home/tafjce/HUYA/comm/GameLiveBase.jce"
#include "/home/tafjce/ExtComm/comm/ExtComm.jce"

module HUYA
{

    struct EbsRequest
    {
        0 optional map<string, string> header;
        1 optional string host;
        2 optional int port;
        3 optional string path;
        4 optional string httpMethod;
        5 optional map<string, string> param;
        6 optional map<string, string> cookies;
    };

    struct EbsResponse
    {
        0 optional map<string, string> header;
        1 optional string statusCode;
        2 optional string entity;
    };

    // 处理扩展向EBS发起请求
    struct RouteEBSReq
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		// 开发者appid
        2 optional string extUuid;                        		// 扩展uuid
        3 optional string extVersion;                           // 扩展版本号
        4 optional long uid;                        			// 主播uid
        5 optional string jwt;                                  // JWT校验串
        6 optional EbsRequest ebsRequest;                       // ebs的请求
    };

    // 响应从EBS侧响应的请求
    struct RouteEBSResp
    {
        0 optional ExtComm::ExtCommonResponse response;
        1 optional EbsResponse ebsResponse;
    };

    struct EbsRequestV2
    {
        0 optional map<string, string> header;
        1 optional string url;
        2 optional string httpMethod;
        3 optional string bodyString;
    };

    // 处理扩展向EBS发起请求
    struct RouteEBSV2Req
    {
        0 optional HUYA::UserId tId;
        1 optional string appId;                        		// 开发者appid
        2 optional string extUuid;                        		// 扩展uuid
        3 optional string extVersion;                           // 扩展版本号
        4 optional long uid;                        			// 主播uid
        5 optional string jwt;                                  // JWT校验串
        6 optional EbsRequestV2 ebsRequest;                     // ebs的请求
    };

    // 响应从EBS侧响应的请求
    struct RouteEBSV2Resp
    {
        0 optional ExtComm::ExtCommonResponse response;
        1 optional EbsResponse ebsResponse;
    };

    interface ExtProxyRouteUI
    {
        int routeEbsRequest(RouteEBSReq tReq, out RouteEBSResp tRsp);
        int routeEbsRequestV2(RouteEBSV2Req tReq, out RouteEBSV2Resp tRsp);
    };
};